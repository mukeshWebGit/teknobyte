{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from\"axios\";import{useContext,useEffect,useReducer,useState}from\"react\";import{Link,useParams,useNavigate}from'react-router-dom';import{Helmet}from'react-helmet-async';import{Store}from\"../Store\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{product:action.payload,loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};export var ProductDetails=function ProductDetails(){var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];var queryParams=new URLSearchParams(window.location.search);var colorPro=queryParams.get(\"color\");var _useState3=useState(colorPro),_useState4=_slicedToArray(_useState3,2),selectedColor=_useState4[0],setSelectedColor=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedImage=_useState6[0],setSelectedImage=_useState6[1];var params=useParams();var slug=params.slug;var _useReducer=useReducer(reducer,{product:[],loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,product=_useReducer2$.product,dispatch=_useReducer2[1];var proCatId=product.category;var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result,resultCategory;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_REQUEST'});_context.prev=1;_context.next=4;return axios.get(\"/api/products/slug/\".concat(slug));case 4:result=_context.sent;dispatch({type:'FETCH_SUCCESS',payload:result.data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:'FETCH_FAIL',payload:_context.t0.message});case 11:_context.next=13;return axios.get('/api/categories');case 13:resultCategory=_context.sent;setCategory(resultCategory.data);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[slug]);var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cart=state.cart;var addToCartHandler=function addToCartHandler(){var existItem=cart.cartItems.find(function(x){return x._id===product._id&&x.selectedCol===colorPro;});var selectedCol=selectedColor;var selectedImg=selectedImage;var quantity=existItem?existItem.quantity+1:1;ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},product),{},{quantity:quantity,selectedCol:selectedCol,selectedImg:selectedImg})});navigate('/cart');};return loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"title\",children:[category.filter(function(byCat){return byCat.categoryName===proCatId;}).map(function(pro){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:pro.categoryName}),/*#__PURE__*/_jsxs(\"div\",{className:\"breadcum\",children:[/*#__PURE__*/_jsx(Link,{to:\"#\",children:\"Home\"}),\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-angle-right\",\"aria-hidden\":\"true\"}),\"   \",pro.categoryName,\" \"]})]},pro._id);}),\"   \"]}),/*#__PURE__*/_jsx(\"section\",{className:\"product\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container product_list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"gallery text-center\",children:colorPro?product.color.filter(function(color){return color.colorName===colorPro;}).map(function(colorF){return/*#__PURE__*/_jsx(\"img\",{src:colorF.gallery,alt:product.name});}):/*#__PURE__*/_jsx(\"img\",{src:product.imageBig,alt:product.name})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"proDetails\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-title\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[\" \",/*#__PURE__*/_jsxs(\"title\",{children:[product.name,\" \"]})]}),/*#__PURE__*/_jsxs(\"h1\",{children:[product.name,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"specification\",children:[/*#__PURE__*/_jsx(\"ul\",{children:Object.keys(product.Specification).map(function(key,index){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:key}),\" : \",product.Specification[key],\" \"]},index);})}),product.color?/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Color :\"}),/*#__PURE__*/_jsx(\"div\",{className:\"colorOpt\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:product.color.map(function(colorOpt){return/*#__PURE__*/_jsxs(\"div\",{className:\"col \".concat(colorPro===colorOpt.colorName?'active':active===colorOpt&&'active'),children:[\" \",/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){setActive(colorOpt);setSelectedColor(colorOpt.colorName);setSelectedImage(colorOpt.colorImg);navigate(\"?color=\".concat(colorOpt.colorName));},children:[/*#__PURE__*/_jsx(\"p\",{children:colorOpt.colorName}),/*#__PURE__*/_jsx(\"img\",{src:colorOpt.colorImg,alt:colorOpt.colorName}),\"     \"]}),\"    \"]},colorOpt.colorName);})})})]})}):null]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt20\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addToCartHandler,className:\"buy\",children:\"Add to Cart\"})})]})})]})})})]});};","map":{"version":3,"names":["axios","useContext","useEffect","useReducer","useState","Link","useParams","useNavigate","Helmet","Store","reducer","state","action","type","loading","product","payload","error","ProductDetails","navigate","active","setActive","queryParams","URLSearchParams","window","location","search","colorPro","get","selectedColor","setSelectedColor","selectedImage","setSelectedImage","params","slug","dispatch","proCatId","category","setCategory","fetchData","result","data","message","resultCategory","ctxDispatch","cart","addToCartHandler","existItem","cartItems","find","x","_id","selectedCol","selectedImg","quantity","filter","byCat","categoryName","map","pro","color","colorName","colorF","gallery","name","imageBig","Object","keys","Specification","key","index","colorOpt","colorImg"],"sources":["D:/react/teknobytePro-main/frontend/src/screens/productDetails.js"],"sourcesContent":["import axios from \"axios\";\nimport { useContext, useEffect, useReducer, useState } from \"react\";\nimport { Link,  useParams, useNavigate } from 'react-router-dom';\nimport {Helmet} from 'react-helmet-async';\nimport { Store } from \"../Store\";\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n      case 'FETCH_REQUEST':\n        return { ...state, loading: true };\n      case 'FETCH_SUCCESS':\n        return { ...state, product: action.payload, loading: false };\n      case 'FETCH_FAIL':\n        return { ...state, loading: false, error: action.payload };\n      default:\n        return state;\n    }\n  };\nexport const ProductDetails = () => { \n  const navigate = useNavigate();\n  const [active, setActive] = useState(null); \n   const queryParams = new URLSearchParams(window.location.search)\n  const colorPro = queryParams.get(\"color\");\n  const [selectedColor, setSelectedColor] = useState(colorPro);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const params = useParams();\n  const { slug } = params;\n  const [{ loading, error, product }, dispatch] = useReducer(reducer, {\n    product: [],\n    loading: true,\n    error: '',\n  });\n  const proCatId = product.category;\n  const [category, setCategory] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_REQUEST' });\n      try {\n        const result = await axios.get(`/api/products/slug/${slug}`);\n        dispatch({ type: 'FETCH_SUCCESS', payload: result.data });\n      } catch (err) {\n        dispatch({ type: 'FETCH_FAIL', payload: err.message });\n      }\n      const resultCategory = await axios.get('/api/categories');\n      setCategory(resultCategory.data);\n    };\n    fetchData();\n    \n  }, [slug]);\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const { cart } = state;\n  const addToCartHandler = () => {\n    const existItem = cart.cartItems.find((x) => x._id === product._id && x.selectedCol === colorPro);\n    const selectedCol = selectedColor ; \n    const selectedImg = selectedImage ; \n    const quantity = existItem ? existItem.quantity + 1 : 1;  \n    ctxDispatch({\n      type: 'CART_ADD_ITEM',\n      payload: { ...product, quantity, selectedCol, selectedImg },\n    }); \n      navigate('/cart');\n  } \n   \n    return(\n        \n          loading ? <div>Loading...</div>\n          : error? <div>{error}</div>\n          : <div> \n            <section className=\"title\">\n      {category.filter((byCat) => byCat.categoryName === proCatId).map((pro) => (\n          <div className=\"container\" key={pro._id}>\n          <h2>{pro.categoryName}</h2>\n          <div className=\"breadcum\"><Link to=\"#\">Home</Link> <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>   {pro.categoryName} </div> \n          </div> \n      ))\n      }   </section>\n            <section className=\"product\">\n              <div className=\"container product_list\">\n                <div className=\"row\">\n                  <div className=\"col-md-5\">\n                    <div className=\"gallery text-center\">\n                      {colorPro ? product.color.filter((color) => color.colorName === colorPro).map((colorF) => (\n                     <img src = {colorF.gallery} alt= {product.name} /> \n                     ))\n                      : <img src = {product.imageBig} alt= {product.name} />} \n                  </div>  \n                  </div>\n                  <div className=\"col-md-7\">\n                  <div  className=\"proDetails\">\n\t\t\t<div className=\"product-title\">\n        <Helmet> <title>{product.name} </title></Helmet>\n\t\t\t\t<h1>{product.name} </h1>  \n\t\t\t</div>\n\t\t\t<div className=\"specification\">\n      <ul>\n        {Object.keys(product.Specification).map((key, index) => \n          <li key={index}><span>{key}</span> : {product.Specification[key]} </li>\n          )}\n          </ul>\n          \n            {product.color \n            ? \n            <ul>\n          <li> \n            <span>Color :</span>\n          <div className=\"colorOpt\">\n            <div className=\"row\">\n              {product.color.map((colorOpt) => (\n                <div key={colorOpt.colorName} className={`col ${colorPro === colorOpt.colorName ? 'active' : active === colorOpt && 'active'}`}> <div onClick={() => {setActive(colorOpt);   setSelectedColor(colorOpt.colorName); setSelectedImage(colorOpt.colorImg); navigate(`?color=${colorOpt.colorName}`)}}><p>{colorOpt.colorName}</p>\n                <img src={colorOpt.colorImg} alt={colorOpt.colorName} />     </div>    </div> \n              ))\n              \n              }\n          </div>\n          </div>  \n          </li></ul>\n          :null\n          }\n       \n     \n\t\t\t</div>\n\t\t\t<div className=\"mt20\"><button type=\"button\" onClick={addToCartHandler} className=\"buy\">Add to Cart</button></div>\n\t\t\t</div>\n                  </div>\n                </div>\n              </div>\n            </section>\n            </div>\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}