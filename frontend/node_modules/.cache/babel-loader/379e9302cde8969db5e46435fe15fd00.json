{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"D:/react/teknobytePro-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from\"axios\";import{useEffect,useReducer}from\"react\";import{Link,useSearchParams}from\"react-router-dom\";import logger from\"use-reducer-logger\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{products:action.payload,loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};var bySearch=function bySearch(search){return function(searchKey){return searchKey.name.toLowerCase().includes((search||'').toLowerCase());};};export var Search=function Search(){var _useReducer=useReducer(logger(reducer),{products:[],loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,products=_useReducer2$.products,dispatch=_useReducer2[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var serchKey=searchParams.get('key');console.log(serchKey);useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_REQUEST'});_context.prev=1;_context.next=4;return axios.get('/api/products');case 4:result=_context.sent;dispatch({type:'FETCH_SUCCESS',payload:result.data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:'FETCH_FAIL',payload:_context.t0.message});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsx(\"section\",{className:\"product\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container product_list\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row text-center\",children:loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{children:Error}):!products.filter(bySearch(serchKey))?/*#__PURE__*/_jsx(\"div\",{children:\" Please\"}):products.filter(bySearch(serchKey)).map(function(product){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"productLists\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"productBg\",children:/*#__PURE__*/_jsxs(Link,{to:product.pColor?\"/product/\".concat(product.slug,\"?color=\").concat(product.pColor):\"/product/\".concat(product.slug),children:[/*#__PURE__*/_jsx(\"h4\",{children:product.name}),/*#__PURE__*/_jsx(\"img\",{src:product.image,className:\"currentImg\",alt:product.name})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"productDes text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"newPrice\",children:[\"Offer Price: \",product.offerPrice]}),/*#__PURE__*/_jsxs(\"p\",{className:\"oldPrice\",children:[\"MRP:  \",product.price]}),/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btnBuy\",children:\"Add to cart\"})]})]})});})})})});};","map":{"version":3,"names":["axios","useEffect","useReducer","Link","useSearchParams","logger","reducer","state","action","type","loading","products","payload","error","bySearch","search","searchKey","name","toLowerCase","includes","Search","dispatch","searchParams","serchKey","get","console","log","fetchData","result","data","message","Error","filter","map","product","pColor","slug","image","offerPrice","price"],"sources":["D:/react/teknobytePro-main/frontend/src/screens/search.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useReducer } from \"react\";\nimport { Link, useSearchParams } from \"react-router-dom\";\nimport logger from \"use-reducer-logger\";\nconst reducer = (state, action) => {\n    switch (action.type) {\n      case 'FETCH_REQUEST':\n        return { ...state, loading: true };\n      case 'FETCH_SUCCESS':\n        return { ...state, products: action.payload, loading: false };\n      case 'FETCH_FAIL':\n        return { ...state, loading: false, error: action.payload };\n      default:\n        return state;\n    }\n  };\n  const bySearch = (search) => (searchKey) => \n  searchKey.name.toLowerCase().includes((search || '').toLowerCase());\nexport const Search = () => {\n    const [{ loading, error, products }, dispatch] = useReducer(logger(reducer), {\n        products: [],\n        loading: true,\n        error: '',\n      }); \n    let [searchParams] = useSearchParams();\n    const serchKey = searchParams.get('key');\nconsole.log(serchKey);\n    useEffect(() => { \n        const fetchData = async () => {\n          dispatch({ type: 'FETCH_REQUEST' });\n          \n        try {\n          const result = await axios.get('/api/products');\n          dispatch({ type: 'FETCH_SUCCESS', payload: result.data });\n        } catch (err) {\n          dispatch({ type: 'FETCH_FAIL', payload: err.message });\n        }  \n        }; \n        fetchData();\n      }, []);  \n\n    return (\n        <section className=\"product\"> \n        <div className=\"container product_list\">\n       \n        <div className=\"row text-center\">\n{loading? (\n      <div>Loading...</div>\n    ): error ? (\n      <div>{Error}</div>\n    ) : !products.filter(bySearch(serchKey)) ? (\n        <div> Please</div>\n    )\n    \n    : (\n      products.filter(bySearch(serchKey)).map((product) => (\n             <div className=\"col-md-4\">\n                <div className=\"productLists\">\n                <div className=\"productBg\"> \n                <Link to={product.pColor ? `/product/${product.slug}?color=${product.pColor}` : `/product/${product.slug}`}>\n            <h4>{product.name}</h4>\n                <img src={product.image} className=\"currentImg\" alt={product.name} />  \n                </Link>\n            </div>\n            <div className=\"productDes text-center\">\n                <p className=\"newPrice\">Offer Price: {product.offerPrice}</p>\n                <p className=\"oldPrice\">MRP:  {product.price}</p>\n                \n                <Link to=\"#\" className=\"btnBuy\">Add to cart</Link>\n            </div> \n                </div>   \n            </div>   \n                \n             \n        ))\n        )}\n      </div>\n      </div>\n      </section>\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}